<div class="container">
  <h3 style="margin:0">{{servers?.length || 0}} Public Servers Online</h3>
  <small>Last client update was {{lastClientUpdate}}. Last database update was {{lastDBUpdate}}</small><br><br>
  <button mat-raised-button color="accent" (click)="getServers()">Refresh</button>
  <mat-form-field *ngIf="servers?.length > 0" class="search">
    <input matInput (keyup)="searchServers($event.target.value)" placeholder="Search">
  </mat-form-field>
</div>
<mat-table *ngIf="servers?.length > 0" [dataSource]="serverData" matSort matSortActive="players" matSortDirection="desc" matSortDisableClear class="mat-elevation-z4">
  <ng-container matColumnDef="players">
    <mat-header-cell *matHeaderCellDef mat-sort-header>Players</mat-header-cell>
    <mat-cell *matCellDef="let server">{{server.players.length}}</mat-cell>
  </ng-container>

  <ng-container matColumnDef="address">
    <mat-header-cell *matHeaderCellDef mat-sort-header>Address</mat-header-cell>
    <mat-cell *matCellDef="let server">{{server.address}}:{{server.port}}</mat-cell>
  </ng-container>

  <ng-container matColumnDef="country">
    <mat-header-cell *matHeaderCellDef mat-sort-header>Country</mat-header-cell>
    <mat-cell *matCellDef="let server"><img src="https://countryflags.io/{{server.countryCode}}/flat/32.png" alt="{{server.countryCode}}" matTooltip="{{server.country}}" matTooltipPosition="left"></mat-cell>
  </ng-container>

  <ng-container matColumnDef="gameStyle">
    <mat-header-cell *matHeaderCellDef mat-sort-header>Game Style</mat-header-cell>
    <mat-cell *matCellDef="let server">{{server.configuration.gameStyle}}</mat-cell>
  </ng-container>

  <ng-container matColumnDef="title">
    <mat-header-cell *matHeaderCellDef mat-sort-header>Title</mat-header-cell>
    <mat-cell *matCellDef="let server">{{server.title}}</mat-cell>
  </ng-container>

  <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
  <mat-row *matRowDef="let row; columns: displayedColumns;" (click)="showServerDialog(row)"></mat-row>
</mat-table>
<mat-paginator [pageSizeOptions]="[10, 30, 50, 100, 200]" [pageSize]="20" showFirstLastButtons></mat-paginator>